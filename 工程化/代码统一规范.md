# ä»£ç ç»Ÿä¸€è§„èŒƒ



## å‰è¨€

æˆ‘å¯¹ä»£ç ç»Ÿä¸€æ ¼å¼åŒ–çš„æ€åº¦æ˜¯ï¼š

- èƒ½å¤ŸæŒ‰ç…§é…ç½®è‡ªåŠ¨æ ¼å¼åŒ–ä»£ç ï¼›
- å¼€å‘è¿‡ç¨‹ä¸­é‡åˆ°ä¸€äº›è¯­æ³•é”™è¯¯æç¤ºï¼Œå¹¶ä¸èƒ½é˜»æ­¢æˆ‘çš„ç¼–è¯‘ï¼›
- æäº¤ä»£ç çš„æè¿°ä¿¡æ¯è§„èŒƒï¼Œæ–¹ä¾¿å‡ºé—®é¢˜æŸ¥é˜…ã€‚

æ‰€ä»¥æˆ‘ä»¥å¾€çš„é¡¹ç›®å°±æ˜¯åœ¨ç½‘ä¸Šæ‰¾åˆ°åˆ«äººçš„ç»éªŒç›´æ¥ `CVå¤§æ³•`ï¼Œä¸€èˆ¬ä¹Ÿä¸ä¼šå‡ºé—®é¢˜ï¼Œå› ä¸ºä¹Ÿå¯¼è‡´æˆ‘å¯¹å®ƒäº†è§£å¹¶ä¸æ˜¯å¾ˆå¤šã€‚ä½†æ˜¯æœ€è¿‘æ¢å»æ¥æ‰‹ä¸€ä¸ªé¡¹ç›®ï¼Œè®©æˆ‘å¤„å¤„ç¢°å£ï¼Œè”ç³»é€ ç‰©ä¸»ä»–ä¹Ÿå¾ˆçƒ­å¿ƒè§£å†³é—®é¢˜ï¼Œä½†æ˜¯ä»ç„¶æ²¡æœ‰è§£å†³æˆ‘çš„æ¶ç–¾ã€‚æˆ‘å—ä¸äº†ï¼Œäºæ˜¯ç»™è‡ªå·±ç«‹äº†ä¸€ä¸ªä¸“é¢˜å­¦ä¹ è®¡åˆ’ï¼Œå¼€å·¥ã€å‡†å¤‡é‡æ„ï¼Œä¸‹é¢éƒ½æ˜¯æˆ‘çš„å®æ“ã€‚



> æœ¬æ–‡å°†è¯¦ç»†è®²è§£ **`å‰ç«¯ä»£ç ç»Ÿä¸€è§„èŒƒ`**ï¼Œæˆäººä»¥é±¼ï¼Œä¸å¦‚æˆäººä»¥æ¸”ï¼Œè¿™ç¯‡æ–‡ç« é±¼å’Œæ¸”éƒ½æœ‰ã€‚å°†ä¼šæ¶‰åŠçš„èŒƒå›´æ¯”è¾ƒå¹¿ï¼Œä½¿ç”¨åˆ°çš„ç¬¬ä¸‰æ–¹åº“æœ‰ä»¥ä¸‹è¿™äº›**ã€Œ Prettierã€Eslintã€Stylelintã€huskyã€commitlintã€lint-stagedã€**ã€‚é˜…è¯»æœ¬æ–‡å°†ä¼šèŠ±è´¹è¾ƒé•¿æ—¶é—´ï¼Œ**å› ä¸ºä½ éœ€è¦ç†Ÿæ‚‰ä¸åŒçš„æ’ä»¶**ã€‚



[é±¼ï¼šä½ å¯ä»¥åœ¨è¿™é‡Œçœ‹è§æˆ‘çš„demo](https://gitee.com/juice-ice/code-formatter)

æ¸”ï¼šå°±æ˜¯ä¸‹é¢å®æ“äº†ï¼Œæˆ‘è¸©è¿‡çš„å‘ï¼Œå’Œæ¨èçš„å®˜ç½‘å¸Œæœ›èƒ½å¤Ÿå¸®åŠ©åˆ°ä½ 

**å‹æƒ…æç¤ºï¼šä¸ºäº†æ–¹ä¾¿è°ƒå¼ï¼Œå¿«é€Ÿé‡æ–°åŠ è½½ç¼–è¾‘å™¨ cmd + shift + p â€”>  Reload Window**



## é—®é¢˜

Eslint å’Œ Prettier å†²çªæ€ä¹ˆè§£å†³ï¼Ÿ

ä¸ºä»€ä¹ˆ Eslint å’Œ Prettier ä¸¤å¤§æ’ä»¶ä¸èåˆä¸€èµ·ï¼Œè®©å¼€å‘è€…å‡å°‘é…ç½®çš„éº»çƒ¦ï¼Ÿ

æ—¢ç„¶ node_modules ä¸Šå®‰è£…äº† Eslintã€Prettier  ä¸ºä»€ä¹ˆ vscode è¿˜éœ€è¦å®‰è£…ï¼Ÿ

æ–°äººæ¥æ‰‹é¡¹ç›®åº”è¯¥å¦‚ä½•è·å–æœ€ä½³ä½“éªŒï¼Œå³æ˜¯å¦‚ä½•å…±äº«é…ç½®ï¼Ÿ



## åˆå§‹åŒ–

å¼€å±€å°±æ˜¯å…ˆä¸€ä¸ªåˆå§‹åŒ–çš„é¡¹ç›®ï¼Œ`npx create-react-app your-project-name `ã€‚

è¯·æŠŠ vscode å…¨éƒ¨æ’ä»¶ç¦ç”¨ã€settings.jsonå…¨éƒ¨æ³¨é‡Šã€‚

å¹²å‡€åˆå«ç”Ÿçš„é¡¹ç›®å’Œç¼–è¾‘å™¨å‡ºæ¥äº†ã€‚



## å¼€å·¥

å¾€é¡¹ç›®ä¸Šå¼€å§‹æ·»ç –åŠ ç“¦ï¼Œä¸€é¡¿æ“ä½œçŒ›å¦‚è™ï¼Œä¸€çœ‹æˆ˜ç»©é›¶æ‰›äº”ã€‚

### Prettier

ä¸€ä¸ªç¾åŒ–é¡¹ç›®ä»£ç çš„è¶…é«˜äººæ°”çš„åº“ï¼Œè‡ªå¸¦é…ç½®å³å¯ä½¿ç”¨ï¼Œä¿®æ”¹é…ç½®åä¸éœ€è¦é‡å¯é¡¹ç›®ï¼Œä½†Eslintå¿…é¡»é‡å¯ã€‚

å…ˆåœ¨ VSCode ä¸Šé¢å®‰è£… `Prettier - Code formatter` ï¼Œå¹¶ä¸”è¯·**ä½ ä»”ç»†é˜…è¯»è¿™ä»½è‹±æ–‡æ–‡æ¡£ï¼Œå’Œ [Prettier å®˜ç½‘](https://prettier.io/docs/en/install.html) è¿™å¾ˆé‡è¦ã€‚** 

æˆ‘çœ‹åˆ°çš„æ„æ€æ˜¯è¿™æ ·çš„

- é…ç½®ä¼˜å…ˆçº§çš„é—®é¢˜
  - é¡¹ç›®è‡ªå¸¦çš„é…ç½® å¦‚ï¼š.prettierrc.jsï¼Œä¼˜å…ˆçº§æœ€é«˜
  - å®‰è£…åœ¨å…¨å±€æˆ–è€…é¡¹ç›®å¤–çš„çš„é…ç½®ï¼Œä¼˜å…ˆçº§æ¬¡ä¹‹
  - æ’ä»¶è‡ªå¸¦çš„ï¼Œä¼˜å…ˆçº§æœ€ä½
- VSCode æ€ä¹ˆè®¾ç½®
  - ` "editor.defaultFormatter": "esbenp.prettier-vscode"`, æ‰€æœ‰çš„æ ¼å¼åŒ–éƒ½ä½¿ç”¨ prettierã€‚
  - vscode ä¹Ÿæ˜¯å¯ä»¥è®¾ç½® prettier çš„é…ç½®çš„ï¼Œä½†ä¸æ¨è
  - `"editor.formatOnSave": true,` å®ƒæ˜¯æ§åˆ¶ç¼–è¾‘å™¨ä¿å­˜çš„æ—¶å€™æ ¼å¼åŒ–ï¼Œæ¥ç€æ‰ä¼šè§¦å‘å…¶ä»–çš„æ ¼å¼åŒ–ç¨‹åº

å…¶å®è¿™ä¸ªæ—¶å€™ï¼Œå½“ä½ æ”¹ä¹±äº† `JavaScript` çš„ä»£ç  ä¿å­˜å°†ä¼šè‡ªåŠ¨ä¿®å¤ä¸ºè¾ƒä¸ºå¥½çœ‹çš„æ ·å­ï¼Œä½†æ˜¯æˆ‘æƒ³ä¿®æ”¹ä¸ºæˆ‘å¸Œæœ›çš„æ ·å­ï¼Œæ‰€ä»¥æˆ‘åˆ›å»ºäº†ä¸€ä¸ª `.prettierrc.js`ï¼Œå¸Œæœ› `Prettier` æŒ‰ç…§æˆ‘çš„é…ç½®ä¿¡æ¯å»åšï¼Œå®é™…ä¹Ÿæ˜¯è¿™æ ·çš„ã€‚

```js
.prettierrc.js æ–‡ä»¶
/* 
 å®‰è£…ï¼šyarn add --exact prettier -D
*/

Prettier æ”¯æŒçš„é…ç½®æ–‡ä»¶ç±»å‹
	JavaScriptï¼š .prettierrc.jsæˆ–prettier.config.js
	JSONï¼š       .prettierrc.json
	YAMLï¼š       .prettierrc.yamlæˆ–.prettierrc.yml
	TOMLï¼š       .prettierrc.toml 

æˆ‘æ‰€æœ‰çš„é…ç½®æ–‡ä»¶éƒ½å°½é‡ä½¿ç”¨ .js ç»“å°¾çš„ç›®çš„æ˜¯ä¸ºäº†èƒ½å¤Ÿè®©æˆ‘å†™ä¸Šæ³¨é‡Šï¼ŒğŸ˜‚ğŸ˜‚ã€‚

module.exports = {
  // ä¸€è¡Œæœ€å¤š 80 å­—ç¬¦
  printWidth: 120,
  // ä½¿ç”¨ 2 ä¸ªç©ºæ ¼ç¼©è¿›
  tabWidth: 2,
  // ä¸ä½¿ç”¨ç¼©è¿›ç¬¦ï¼Œè€Œä½¿ç”¨ç©ºæ ¼
  useTabs: false,
  // è¡Œå°¾éœ€è¦æœ‰åˆ†å·
  semi: true,
  // ä½¿ç”¨å•å¼•å·
  singleQuote: true,
  // å¯¹è±¡çš„ key ä»…åœ¨å¿…è¦æ—¶ç”¨å¼•å·
  quoteProps: 'as-needed',
  // jsx ä½¿ç”¨å•å¼•å·
  jsxSingleQuote: true,
  // æœ«å°¾ä¸éœ€è¦é€—å·ï¼Œéœ€è¦åˆ™ allï¼Œæœ‰æ—¶å€™æŒºæ–¹ä¾¿çš„ï¼Œæœ‰æ—¶å€™ä¹ŸæŒºçƒ¦çš„
  trailingComma: 'none',
  // å¤§æ‹¬å·å†…çš„é¦–å°¾éœ€è¦ç©ºæ ¼
  bracketSpacing: true,
  // jsx æ ‡ç­¾çš„åå°–æ‹¬å·éœ€è¦æ¢è¡Œï¼Œtrue
  jsxBracketSameLine: false,
  // ç®­å¤´å‡½æ•°ï¼Œåªæœ‰ä¸€ä¸ªå‚æ•°çš„æ—¶å€™ï¼Œä¹Ÿéœ€è¦æ‹¬å·
  arrowParens: 'always',
  // æ¯ä¸ªæ–‡ä»¶æ ¼å¼åŒ–çš„èŒƒå›´æ˜¯æ–‡ä»¶çš„å…¨éƒ¨å†…å®¹
  rangeStart: 0,
  rangeEnd: Infinity,
  // ä¸éœ€è¦å†™æ–‡ä»¶å¼€å¤´çš„ @prettier
  requirePragma: false,
  // ä¸éœ€è¦è‡ªåŠ¨åœ¨æ–‡ä»¶å¼€å¤´æ’å…¥ @prettier
  insertPragma: false,
  // ä½¿ç”¨é»˜è®¤çš„æŠ˜è¡Œæ ‡å‡†
  proseWrap: 'preserve',
  // æ ¹æ®æ˜¾ç¤ºæ ·å¼å†³å®š html è¦ä¸è¦æŠ˜è¡Œ
  htmlWhitespaceSensitivity: 'css',
  // æ¢è¡Œç¬¦ä½¿ç”¨ lf
  endOfLine: 'lf'
};
```

**æ—¢ç„¶ node_modules ä¸Šå®‰è£…äº† Eslintã€Prettier  ä¸ºä»€ä¹ˆ vscode è¿˜éœ€è¦å®‰è£…ï¼Ÿ**

**ä½ ä»ç„¶éœ€è¦åœ¨ node_modules ä¸Šä¸‹è½½è¿™ä¸ªåŒ… `yarn add --dev --exact prettier`**

ç¼–è¾‘å™¨å®‰è£…çš„  `Prettier` åœ¨æˆ‘ä»¬å¼€å‘çš„æ—¶å€™ä¼šæ‰§è¡Œæ ¼å¼åŒ–å·¥ä½œï¼Œå¦‚æœé¡¹ç›®æ ¹ç›®å½•ä¸‹æœ‰ `prettierrc.js` é…ç½®æ–‡ä»¶ï¼Œç¼–è¾‘å™¨çš„æ’ä»¶ä¼šè¯»å–é…ç½®æ–‡ä»¶ä¸­çš„é…ç½®å»æ ¼å¼åŒ–ä»£ç ï¼Œnpm å®‰è£…çš„æ˜¯åœ¨å‘½ä»¤è¡Œä¸­è¿è¡Œçš„ï¼Œå³æ˜¯ `npm run prettier --write`ï¼Œè¿™æ ·æ‰èƒ½å‘æŒ¥å‡ºnpmåŒ…çš„ä½œç”¨ã€‚å°†ä¼šå‡ºç°ä¸€ä¸‹æƒ…å†µã€‚

- åªå®‰è£… npm åŒ…
  - ç¼–è¾‘å™¨æ˜¯ä¸ä¼šè‡ªåŠ¨æ ¼å¼åŒ–ä»£ç ï¼Œåªèƒ½é€šè¿‡å‘½ä»¤è¡Œè¿è¡Œæ’ä»¶æ‰èƒ½æ ¼å¼åŒ–
- åªå®‰è£…ç¼–è¾‘å™¨æ’ä»¶
  - é‚£å°†ä¼šä¸¢å¤±æˆ‘ä»¬åç»­å°†è¦ä»‹ç»çš„ `lint-staged` å¯¹ä»£ç åœ¨æäº¤å‰å»æ ¡éªŒ

å®‰è£… npmåŒ…æœ€ä¸»è¦çš„åŸå› æ˜¯å¯ä»¥é€šè¿‡ `husky` é…åˆ  `lint-staged` ï¼Œå¼ºåˆ¶åœ¨æäº¤ä»£ç å‰æ ¼å¼åŒ–ä»£ç ä¿è¯å¼€å‘ä»£ç å’Œä»“åº“ä»£ç é£æ ¼ç»Ÿä¸€ã€‚

å½“ç„¶åç»­çš„ `Stylint`  ç†è§£åŸºæœ¬åŒä¸Šï¼Œ `Eslint` æœ‰æ‰€ä¸åŒï¼Œå› ä¸ºå®ƒéœ€è¦ä¸‹è½½ npm åŒ… å’Œ Vscode æ’ä»¶æ‰èƒ½å‘æŒ¥ä½œç”¨ã€‚

**å‹æƒ…æç¤ºï¼šæˆ‘ä»¬åœ¨é…ç½®è§„åˆ™çš„æ—¶å€™ï¼Œå¯ä»¥åœ¨å°é»‘çª—ã€Œç»ˆç«¯çª—å£-->è¾“å‡º--> ESlint/Prettierã€æŸ¥çœ‹ lint é…ç½®ä¿¡æ¯å’ŒæŠ¥é”™ä¿¡æ¯ã€‚**



### Stylelint

ä¸€ä¸ªæ ¼å¼åŒ– CSS çš„åº“ï¼Œå®ƒçš„è§„åˆ™å…¶å®å’Œ Prettier ä¸€æ ·çš„ã€‚

å…ˆåœ¨ VSCode ä¸Šé¢å®‰è£… `Stylelint` ï¼Œå¹¶ä¸”è¯·**ä½ ä»”ç»†é˜…è¯»è¿™ä»½è‹±æ–‡æ–‡æ¡£ï¼Œå’Œ [Stylelint å®˜ç½‘](https://stylelint.io/user-guide/get-started) è¿™å¾ˆé‡è¦ã€‚**

æˆ‘çœ‹åˆ°çš„æ„æ€æ˜¯è¿™æ ·çš„

- é…ç½®ä¼˜å…ˆçº§çš„é—®é¢˜
  - åŒ Prettier  ä¸Šé¢è¯´çš„ä¸€è‡´

- VSCode æ€ä¹ˆè®¾ç½®
  - ä¿å­˜çš„æ—¶å€™éœ€è¦é…ç½®æ ¼å¼åŒ–æŒ‡ä»¤å—ï¼Ÿä¸éœ€è¦ï¼Œå› ä¸ºä¸Šé¢å·²ç»é…ç½®è¿‡äº†
  -  ` "stylelint.validate": ["css", "less", "postcss", "scss", "vue", "sass"],`è¿™æ˜¯å› ä¸ºï¼Œstylelint é»˜è®¤æ”¯æŒ css postcss æ˜¾ç„¶ä¸å¤Ÿçš„ï¼Œè¿™é‡ŒåŠ ä¸Šæ‰€æœ‰çš„å¯èƒ½ç”¨ä¸Šçš„ï¼Œ æ¨èåœ¨ç”¨æˆ·settings.jsonè®¾ç½®ï¼Œ å› ä¸º.vscode/setting.jsoin è®¾ç½®æ— æ•ˆï¼Œæš‚ä¸æ˜åŸå› ï¼Œã€‚

å…¶å®è¿™ä¸ªæ—¶å€™ï¼Œå½“ä½ æ”¹ä¹±äº† `CSS` çš„ä»£ç  ä¿å­˜å°†ä¼šè‡ªåŠ¨ä¿®å¤ä¸ºè¾ƒä¸ºå¥½çœ‹çš„æ ·å­ï¼Œä½†æ˜¯æˆ‘æƒ³ä¿®æ”¹ä¸ºæˆ‘å¸Œæœ›çš„æ ·å­ï¼Œæ‰€ä»¥æˆ‘åˆ›å»ºäº†ä¸€ä¸ª `.stylelintrc.js`ï¼Œå¸Œæœ› `Stylelint` æŒ‰ç…§æˆ‘çš„é…ç½®ä¿¡æ¯å»åšï¼Œå®é™…ä¹Ÿæ˜¯è¿™æ ·çš„ã€‚

```js
.stylelintrc.js æ–‡ä»¶
/* 
 å®‰è£…ï¼š yarn add stylelint stylelint-config-standard stylelint-config-prettier -D
*/
module.exports = {
  extends: ['stylelint-config-standard', 'stylelint-config-prettier']
};
```

åˆ°äº†è¿™é‡Œçš„é¡¹ç›®å…¶å®æ˜¯éå¸¸çš„é¡ºåˆ©çš„ï¼Œä¸ä¼šæœ‰å†²çªï¼Œä¹Ÿä¼šè‡ªåŠ¨æ ¼å¼åŒ–ä»£ç ï¼Œå†²çªéƒ½æ˜¯å‘ç”Ÿåœ¨é…ç½® `Eslint` åï¼Œå½“ `Pretter` å’Œ `Eslint` è§„åˆ™ä¸ä¸€è‡´å¯¼è‡´çš„ã€‚

### Eslint

ä¸€ä¸ªæ ¡éªŒ `Javascript` å’Œ `TypeScript` ä»£ç è´¨é‡çš„åº“ï¼Œå¾®è½¯å‡ºå“ï¼Œå¤§å®¶æƒ³å¿…éå¸¸ç†Ÿæ‚‰ä¸ç”¨å†ä»‹ç»äº†ã€‚

å…ˆåœ¨ VSCode ä¸Šé¢å®‰è£… `ESLint` ï¼Œå¹¶ä¸”è¯·**ä½ ä»”ç»†é˜…è¯»è¿™ä»½è‹±æ–‡æ–‡æ¡£ï¼Œå’Œ [ESLintå®˜ç½‘](https://eslint.org/docs/user-guide/getting-started) è¿™å¾ˆé‡è¦ã€‚** 

å…ˆè¯´æ˜ä¸€ä¸‹ï¼šEslint å’Œ ä¸Šé¢ä¸¤ä¸ªåº“å¯ä¸ä¸€æ ·ï¼Œä¸‹è½½äº†Vscode æ’ä»¶ å¹¶æ²¡æœ‰å•¥ç”¨çš„å“¦ï¼Œè¿˜éœ€è¦ä¸‹è½½ npm åŒ…ï¼Œè¿˜éœ€é…ç½® `.eslintrc.js`ï¼Œå¹¶ä¸”å®ƒä¿®æ”¹ `.eslintrc.js` æ˜¯éœ€è¦é‡å¯é¡¹ç›®æ‰èƒ½æœ‰ä½œç”¨çš„ï¼Œä¸Šé¢è¯´äº†å¿«é€Ÿé‡æ–°åŠ è½½ VSCode çš„æ–¹æ³•ã€‚

æˆ‘çœ‹åˆ°çš„æ„æ€æ˜¯è¿™æ ·çš„

- é…ç½®ä¼˜å…ˆçº§çš„é—®é¢˜
  - åŒä¸Š
  - æ’ä»¶è‡ªå¸¦çš„é…ç½®å¥½åƒæ˜¯æ²¡æœ‰çš„ï¼Œæˆ‘å¹¶æ²¡æœ‰å»äº†è§£ã€‚
- VSCode æ€ä¹ˆè®¾ç½®
  -  "editor.codeActionsOnSave": { "source.fixAll": true } ä¿å­˜çš„æ—¶å€™ï¼Œæ‰€ä»¥çš„æ ¼å¼åŒ–ç¨‹åºè‡ªåŠ¨ä¿®å¤ï¼ŒåŒ…æ‹¬ eslint
  -   "eslint.alwaysShowStatus": true, // æ¨èåœ¨ç”¨æˆ·settings.jsonè®¾ç½®ï¼Œ å› ä¸º.vscode/setting.jsoin è®¾ç½®æ— æ•ˆï¼Œæš‚ä¸æ˜åŸå› ã€‚

è¿™æ—¶å€™å…¶å®ä¿®æ”¹é”™è¯¯çš„ä»£ç å¹¶ä¸ä¼šæç¤ºï¼Œä½ éœ€è¦ `yarn create @eslint/config`, è¿™æ ·ä½ å¯ä»¥é€‰æ‹©å¾ˆå¤šçš„ä¸ªæ€§åŒ–é€‰é¡¹å®šåˆ¶ä½ çš„ `ESlint`ï¼Œç”Ÿæˆ .eslintrc.js æ–‡ä»¶ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæˆ‘å¸Œæœ›ä½ ä¸è¦é€‰ Airbnbï¼Œå› ä¸ºå®ƒä¼šè®©ä½ é…ç½®çš„æ›´åŠ å›°éš¾ï¼Œå¹¶ä¸”å‡ºç°ä»»ä½•é”™è¯¯éƒ½ä¼šæŠ¥é”™ï¼Œä¼˜å…ˆè§£å†³è¯­æ³•ä¸åˆç†çš„é”™è¯¯å¯¼è‡´å†™éœ€æ±‚å˜æ…¢ï¼Œæ˜¾ç„¶è¿™ä¸æ˜¯æˆ‘æƒ³è¦çš„ã€‚

å¥½äº†ï¼Œä½ çš„é¡¹ç›®å·²ç»æœ‰äº† `ESLint` æ ¡éªŒäº†ã€‚

**Eslint å’Œ Prettier å†²çªæ€ä¹ˆè§£å†³ï¼Ÿ**

å¦‚æœä½ çš„ä»£ç å‡ºç°çš„å†²çªï¼Œæ˜¾ç„¶æ˜¯ Eslint å’Œ Prettier å†²çªäº†ï¼Œä½ è§£å†³çš„æ–¹æ¡ˆ æœ‰ä¸¤ä¸ªã€‚

1. ä½¿ç”¨æ’ä»¶è§£å†³ï¼šè®©æ‰€æœ‰å¯èƒ½ä¼šä¸ Prettier è§„åˆ™å­˜åœ¨å†²çªçš„ ESLint rule å¤±æ•ˆï¼Œå¹¶ä½¿ç”¨ Prettier çš„è§„åˆ™è¿›è¡Œä»£ç æ£€æŸ¥ï¼Œå³æ˜¯ï¼Œç”¨ Prettier çš„è§„åˆ™ï¼Œè¦†ç›–æ‰ eslint:recommended çš„éƒ¨åˆ†è§„åˆ™ã€‚
   1.  [eslint-config-prettier](https://github.com/prettier/eslint-config-prettier) è§£å†³ Javascript å’Œ Prettier çš„é”™è¯¯ã€‚
   2.  [tslint-config-prettier](https://github.com/prettier/tslint-config-prettier) è§£å†³ TypeScript å’Œ Prettier çš„é”™è¯¯ã€‚
2. æ‰¾åˆ°ä¸ä¸€æ ·ç‚¹ï¼Œæ”¹ä¸ºä¸€æ ·çš„ã€‚

```js
/*
	eslint-plugin-react-hooks
	eslint-plugin-promise
	è¿™ä¸¤ä¸ªæ’ä»¶æ˜¯æˆ‘é¢å¤–åŠ çš„ï¼Œå…¶ä»–éƒ½æ˜¯åœ¨ yarn create @eslint/config å‘½ä»¤ä¸­ä¸ªæ€§åŒ–å‡ºæ¥çš„é…ç½®ã€‚
*/


module.exports = {
  env: {
    browser: true,
    es2021: true
  },
  extends: [
    'eslint:recommended',
    'plugin:react/recommended',
    'plugin:@typescript-eslint/recommended',
    'plugin:react-hooks/recommended'
  ],
  parser: '@typescript-eslint/parser',
  parserOptions: {
    ecmaFeatures: {
      jsx: true
    },
    ecmaVersion: 'latest',
    sourceType: 'module'
  },
  plugins: ['react', '@typescript-eslint', 'promise'],
  rules: {}
};
```



**ä¸ºä»€ä¹ˆ Eslint å’Œ Prettier ä¸¤å¤§æ’ä»¶ä¸èåˆä¸€èµ·ï¼Œè®©å¼€å‘è€…å‡å°‘é…ç½®çš„éº»çƒ¦ï¼Ÿ**

è¿™æ˜¯ä¸€ä¸ªå¼€æ”¾çš„é—®é¢˜ï¼Œä»¥ä¸‹ä»…ä»£è¡¨ä¸ªäººçš„çœ‹æ³•ã€‚

é¦–å…ˆ ESlint å®ƒå…¶å®ä¹Ÿæ˜¯å¯ä»¥åšæ ¼å¼åŒ–çš„ï¼Œä½†æ˜¯æ²¡æœ‰ Prettier  ä¸“ä¸šï¼Œå®ƒæ˜¯å¾®è½¯ä¸“é—¨ç”¨äºå¯¹ä»£ç è´¨é‡æ–¹æ–¹å‘çš„ï¼Œå¼ºå¤„åœ¨äºæ ¡éªŒä»£ç çš„æ ¼å¼æ˜¯å¦ç¬¦åˆä½ é…ç½®çš„è¦æ±‚ã€‚Prettier  æ˜¯åªåœ¨ä¹ä»£ç çš„ç¾åŒ–ï¼Œå¹¶ä¸”ä¸ä»…ä»… JavaScript ç¾åŒ–ï¼Œå®ƒç‹©çŒæŒºå¤šçš„ ã€ŒTypeScript ã€Flow ã€ JSXã€JSONã€CSS ã€ SCSS ã€ Lessã€HTML ã€ Vue ã€ Markdown ã€ YAMLã€ï¼Œå®ƒä»¬éƒ½æ˜¯ä¸åŒçš„å¼€å‘è€…å¼€æºçš„ï¼Œæ‰€ä»¥èåˆå¹¶éæ˜“äº‹ã€‚

**é‚£å®ƒä»¬ä¸ºä»€ä¹ˆè¦ä¸€èµ·ä½¿ç”¨å‘¢ï¼Ÿç›´æ¥ä½¿ç”¨ ESLint ä¹Ÿå¯ä»¥æé«˜ä»£ç è´¨é‡ï¼Ÿ**

å½“ä½ åªè®¾ç½® ESlintçš„æ—¶å€™ï¼Œä½ ä¼šå‘ç°æ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯å½“æˆ‘ä»¬å¼€å‘çš„æ—¶å€™ï¼Œä¸æ–­çš„éœ€è¦å†™æ ¼å¼çš„é—®é¢˜ï¼Œæ¯”å¦‚æ·»åŠ  ã€Œ; , '',""ã€,è¿™æ ·ä¹Ÿæ˜¯æœ‰æŸå¼€å‘æ•ˆç‡çš„ï¼ŒPrettier å®ƒå¯ä»¥å¸®æˆ‘ä»¬åšçš„ã€‚

**æ–°äººæ¥æ‰‹é¡¹ç›®åº”è¯¥å¦‚ä½•è·å–æœ€ä½³ä½“éªŒï¼Œå³æ˜¯å¦‚ä½•å…±äº«é…ç½®ï¼Ÿ**

å…¶å®è¿™é‡Œæœ‰ä¸€åŠ³æ°¸é€¸çš„æ–¹æ³•ï¼Œé…ç½® .vscode/settings.jsonã€.vscode/extensions.jsonã€‚

 **.vscode/settings.json**

- ä¼˜å…ˆçº§é—®é¢˜
  - é¡¹ç›®å­˜åœ¨ `.vscode/settings.json` æ–‡ä»¶ï¼Œä¼˜å…ˆé€‰æ‹©
  - é¡¹ç›®å·¥ä½œåŒºå­˜åœ¨ settings.json æ–‡ä»¶ï¼Œæ¬¡ä¹‹
  - ç”¨æˆ· setitngs.json ä¼˜å…ˆçº§æœ€ä½ï¼Œè¿™é‡Œä¹Ÿæ˜¯ä¼šå†²çªçš„é—®é¢˜

```json
/*
	æˆ‘ä»¬åœ¨è¿™é‡Œå°†åˆšåˆšè¯´çš„æ‰€æœ‰é…ç½®éƒ½ä¸¢åˆ°è¿™é‡Œæ¥ï¼Œ ç”¨æˆ· setitngs.json å°±å¯ä»¥åˆ æ‰äº†ã€‚å®ƒä¼šä¼˜å…ˆè¯»å–è¿™é‡Œçš„ï¼Œå¹¶ä¸”æ–°çš„æˆå‘˜åŠ å…¥è¿›æ¥ï¼Œå¼€å‘ä¹Ÿæ˜¯æ‹¿è¿™å¥—é…ç½®ã€‚
*/
{
    "editor.codeActionsOnSave": {
    "source.fixAll": true
  },
  "eslint.alwaysShowStatus": true,

  "editor.defaultFormatter": "esbenp.prettier-vscode",
  "[javascript]": {
    "editor.defaultFormatter": "esbenp.prettier-vscode"
  },

  "editor.formatOnSave": true,
  "stylelint.validate": ["css", "less", "postcss", "scss", "vue", "sass"]

}
```



**.vscode/extensions.json**

å®ƒçš„ä½œç”¨å³æ˜¯ç®¡ç†æ’ä»¶çš„ï¼Œå‘Šè¯‰å¼€å‘è€…è¿™ä¸ªé¡¹ç›®å¿…é¡»å®‰è£…VSCodeæ’ä»¶æ˜¯å“ªäº›ã€‚

```json
{
    "recommendations": [
        "dbaeumer.vscode-eslint",
        "esbenp.prettier-vscode",
        "stylelint.vscode-stylelint",
        "wayou.vscode-todo-highlight",
        "formulahendry.auto-close-tag",
    "formulahendry.auto-rename-tag"
    ]
}
```

å¦‚å›¾ï¼Œå¼€å‘è€…å°±ä¼šéå¸¸å®¹æ˜“çš„æ‰¾åˆ°ã€‚

![image-20220409101524235](images/image-20220409101524235.png)

**ä½œä¸ºé¡¹ç›®åˆ›å»ºè€…ï¼Œæˆ‘é…ç½® recommendations å†…å®¹æ˜¯è¿™æ ·æ‰¾åˆ°çš„ã€‚**

![image-20220409101628359](images/image-20220409101628359.png)



**é¡ºä¾¿åœ¨è¯´ä¸€ä¸‹ï¼Œä¸åŒæŠ€æœ¯æ ˆå¯¹åº”ä¸åŒçš„æ’ä»¶**

```
Reactï¼š
	"babel-eslint"
	"eslint"
	"eslint-plugin-import"
	"eslint-plugin-promise"
	"eslint-plugin-react"
	"eslint-plugin-react-hooks"
	"prettier"
	
React + TSï¼š
	"@typescript-eslint/eslint-plugin"
	"@typescript-eslint/parser"
	"eslint"
	"eslint-plugin-import"
	"eslint-plugin-promise"
	"eslint-plugin-react"
	"eslint-plugin-react-hooks"
	"typescript"
	"prettier"
	
Vueï¼š
	"babel-eslint"
	"eslint"
	"eslint-plugin-html"
	"eslint-plugin-import"
	"eslint-plugin-promise"
	"eslint-plugin-vue"
	"prettier"

Vue + TSï¼š
	"@typescript-eslint/eslint-plugin"
	"@typescript-eslint/parser"
	"babel-eslint"
	"eslint"
	"eslint-plugin-html"
	"eslint-plugin-import"
	"eslint-plugin-promise"
	"eslint-plugin-vue"
	"typescript"
	"prettier"
```



### å°ç»“

åˆ°äº†è¿™é‡Œä¹‹åæˆ‘ä»¬çš„ä»£ç æ ¼å¼åŒ–å°±å·²ç»ç»“æŸäº†ï¼Œä½†æ˜¯ä»ç„¶ä¸å…¨ï¼Œç¼ºä¹æœ€åçš„æ ¡éªŒï¼Œæ¯”å¦‚å¼€å‘æˆå‘˜ä»–ä¸å®‰è£…æ’ä»¶ï¼Œè¿™æ ·ä»£ç å°±ä¸ä¼šæ ¼å¼åŒ–ï¼Œå€Ÿç”¨ `lint-staged çš„ä¸€å¥è¯`,  `Run linters against staged git files and don't let ğŸ’© slip into your code base!`



### husky

[è¯·ä»”ç»†é˜…è¯»å®˜ç½‘ï¼Œè¿™å¾ˆé‡è¦ï¼](https://typicode.github.io/husky/#/)

å®ƒæ˜¯ä¸€ä¸ªæ— ä¾èµ–çš„ npmåŒ…ï¼Œæä¾› git æ‰€æœ‰çš„ hookï¼Œä½†æ˜¯éœ€è¦ä½ å»é…ç½®ï¼Œå®ƒé‡Œé¢ä¹Ÿè¯´æ˜å¦‚ä½•é…ç½®ã€‚

æˆ‘ä»¬å°†ä¼šé…ç½® pre-commit ç”¨äºé…åˆ lint-staged ä½¿ç”¨ï¼Œè¯¥hook çš„ä½œç”¨æ˜¯åœ¨æäº¤commit ä¹‹å‰æ‰§è¡Œ

åŒæ—¶ä¹Ÿä¼šé…ç½® commit-msg ç”¨äºé…ç½® commitlint ä½¿ç”¨ï¼Œè¯¥hook çš„ä½œç”¨æ˜¯éªŒè¯æäº¤çš„commit æè¿°ä¿¡æ¯æ˜¯å¦ç¬¦åˆè§„èŒƒ

**å‹æƒ…æç¤ºï¼šæ³¨æ„ husky V7 å’Œ V4 çš„åŒºåˆ«ï¼Œè¿™æ˜¯ä¸€ä¸ª breakChangeï¼Œæˆ‘è¿™é‡Œæ˜¯åŸºäº V7**

```json
npx husky-init && npm install       # npm
npx husky-init && yarn              # Yarn 1 æˆ‘çš„yarn çš„ç‰ˆæœ¬æ˜¯ 1.22.17
yarn dlx husky-init --yarn2 && yarn # Yarn 2

è¿™æ—¶å€™ä½ ä¼šå‘ç°ï¼Œé¡¹ç›®å¤šäº† .husky æ–‡ä»¶ã€‚

æ·»åŠ  pre-commit é’©å­ï¼š
npx husky add .husky/pre-commit "npm lint-staged"

æ·»åŠ  commit-msg é’©å­ï¼š
	npx husky add .husky/commit-msg 'npx --no-install commitlint --edit "$1"'
```

é’©å­éƒ½é…ç½®å¥½äº†ï¼Œå‰©ä¸‹çš„å°±æ˜¯è®©é’©å­å¹²æ´»ã€‚

### lint-staged

[è¯·ä»”ç»†é˜…è¯»å®˜ç½‘ï¼Œè¿™å¾ˆé‡è¦ï¼](https://github.com/okonet/lint-staged)

å®ƒæ˜¯ä¸€ä¸ªè„šæœ¬ï¼Œåœ¨æäº¤ä»£ç ä¹‹å‰æ‰§è¡Œï¼Œä¾èµ–çš„ pre-commit é’©å­ï¼Œå› ä¸ºåœ¨è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å°†ä¼šæŠŠ `Eslintã€Prettierã€Stylelint` åœ¨è¿™é‡Œå†æ¬¡æ‰§è¡Œä¸€æ¬¡ npm å‘½ä»¤ï¼Œåœ¨è¿™é‡Œå¯ä»¥æŠŠæ‰€æœ‰çš„ä»£ç æœ€ç»ˆé‡æ–°æ ¼å¼åŒ–ï¼Œæäº¤åˆ°è¿œç¨‹ä»“åº“ã€‚

å½“ä»£ç å‘ç”Ÿäº†æ”¹å˜ï¼Œlint-staged ä¼šæŠŠä¿®æ”¹åçš„ä»£ç åŠ è¿›ç¼“å­˜åŒºï¼Œç„¶åå†èµ° `git commit`

```json
npx mrm@2 lint-staged å°†ä¼šè‡ªåŠ¨çš„ç»™æˆ‘ä»¬çš„ package.json æ·»åŠ  lint-staged å¯¹è±¡ï¼Œæˆ‘ä»¬éœ€è¦å°†å®ƒæ”¹é€ å¦‚ä¸‹ã€‚

"lint-staged": {
  "*.(js|ts|tsx|jsx)": [
    "prettier --write",
    "./node_modules/.bin/eslint --fix",
    "./node_modules/.bin/eslint"
  ],
  "*.(css|less|scss)": [
    "stylelint --fix",
    "prettier --write"
  ]
}
```



### commitlint

[è¯·ä»”ç»†é˜…è¯»å®˜ç½‘ï¼Œè¿™å¾ˆé‡è¦ï¼](https://github.com/conventional-changelog/commitlint#getting-started)ï¼Œ[å¦å¤–ä¸€ä¸ªç”¨åˆ°çš„æ’ä»¶åº“](https://github.com/conventional-changelog/commitlint/tree/master/@commitlint/config-conventional)ã€‚

å®ƒæ˜¯ç”¨äºæ ¡éªŒæäº¤çš„æè¿°ä¿¡æ¯æ˜¯å¦è§„èŒƒï¼Œåœ¨æäº¤ä»£ç ä¹‹å‰æ‰§è¡Œï¼Œä¾èµ–çš„ commit-msg é’©å­ï¼Œå¦‚æœé€šè¿‡åˆ™ commit æˆåŠŸï¼Œå¦‚æœå¤±è´¥commit å°†æ— æ•ˆï¼Œä»£ç ä»ç„¶åœ¨ æš‚å­˜åŒºã€‚

éœ€è¦é…ç½® `.commitlintrc.js`

```json
/*
	å®‰è£…ï¼šyarn add  @commitlint/config-conventional @commitlint/cli -D

*/

module.exports = {
  extends: ['@commitlint/config-conventional'],
  rules: {
    'type-enum': [
      2,
      'always',
      ['upd', 'feat', 'fix', 'refactor', 'docs', 'chore', 'style', 'revert']
    ],
    'type-case': [0],
    'type-empty': [0],
    'scope-empty': [0],
    'scope-case': [0],
    'subject-full-stop': [0, 'never'],
    'subject-case': [0, 'never'],
    'header-max-length': [0, 'always', 72]
  }
};

build    æ„å»ºé¡¹ç›®
chore    æ„å»ºè¿‡ç¨‹ã€è¾…åŠ©å·¥å…·ã€ä¾èµ–ç®¡ç†çš„å˜åŠ¨
ci       ä¿®æ”¹é¡¹ç›®æŒç»­é›†æˆæµç¨‹(ä¾‹å¦‚ Travisï¼ŒJenkinsï¼ŒGitLab CIï¼ŒCircleç­‰)çš„æäº¤
docs     æ–‡æ¡£ä¿®æ”¹ 
feat     æ–°åŠŸèƒ½ (feature)
fix      ä¿®å¤ã€ä¿®æ”¹é—®é¢˜
perf     æ€§èƒ½, ä½“éªŒä¼˜åŒ–
refactor ä»£ç é‡æ„
revert   å›æ»šæŸä¸ªæ›´æ—©ä¹‹å‰çš„æäº¤
style    ä»£ç æ ¼å¼ä¿®æ”¹ (ä¸åªæ˜¯ css ä¿®æ”¹)
test     æµ‹è¯•ç”¨ä¾‹ä¿®æ”¹
```

å¥½äº†ï¼Œå…³äº `git hook` çš„é…ç½®å¤§æ¦‚é…ç½®å®Œäº†ï¼Œä½†æ˜¯æˆ‘äº†è§£åˆ°çš„ åœ¨ `push é˜¶æ®µ`æ—¶å€™ å¯ä»¥æ‰§è¡Œ `npm run test`ï¼Œèµ°ä¸€ä¸‹æµ‹è¯•ç”¨ä¾‹å†å» `push` åˆ°è¿œç¨‹ä»“åº“ï¼Œæˆ‘è¿™é‡Œæ²¡æœ‰é…ç½®ã€‚





## ç¨‹åºå‘˜çš„ä»£ç è§„èŒƒ

> æœ‰äº†ä¸Šé¢çš„å¼ºåˆ¶çš„è§„èŒƒåï¼Œä½†æ˜¯å‘½åè§„èŒƒï¼Œä»£ç é£æ ¼ï¼Œè¿™äº›æ›´é‡è¦ï¼Œæ‰€ä»¥æˆ‘æ¨èå‡ ä¸ªæŒºå¥½çš„æ–‡ç« å­¦ä¹ ã€‚

[JavaScript Standard Style](https://github.com/standard/standard/blob/master/docs/RULES-zhcn.md#javascript-standard-style)

[è…¾è®¯ Code Guide by @AlloyTeam ](https://alloyteam.github.io/CodeGuide/)

[é˜¿é‡Œå‰ç«¯å¼€å‘è§„èŒƒ](https://w3ctim.com/post/1d821dd8.html)



# æ€»ç»“

æœ¬æ–‡ä» VSCode ã€ VSCodeæ’ä»¶ ã€npm åŒ…ä»¥åŠgit hook çš„é…ç½®ï¼Œä¸€æ¡é“¾è·¯åŸºæœ¬æŠŠä»£ç æ ¼å¼è‡ªåŠ¨åŒ–åšå¥½äº†

